swagger: "2.0"
info:
  title: beego Test API
  description: |
    beego has a very cool tools to autogenerate documents for your API
  version: 1.0.0
  termsOfService: http://beego.me/
  contact:
    email: astaxie@gmail.com
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
basePath: /v1
paths:
  /auth/:
    get:
      tags:
      - auth
      description: |-
        get Auth
        <br>
      operationId: AuthController.Get All
      parameters:
      - in: query
        name: query
        description: Filter. e.g. col1:v1,col2:v2 ...
        type: string
      - in: query
        name: fields
        description: Fields returned. e.g. col1,col2 ...
        type: string
      - in: query
        name: sortby
        description: Sorted-by fields. e.g. col1,col2 ...
        type: string
      - in: query
        name: order
        description: Order corresponding to each sortby field, if single value, apply
          to all sortby fields. e.g. desc,asc ...
        type: string
      - in: query
        name: limit
        description: Limit the size of result set. Must be an integer
        type: string
      - in: query
        name: offset
        description: Start position of result set. Must be an integer
        type: string
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.Auth'
        "403":
          description: ""
  /auth/{id}:
    get:
      tags:
      - auth
      description: |-
        get Auth by id
        <br>
      operationId: AuthController.Get One
      parameters:
      - in: path
        name: id
        description: The key for staticblock
        required: true
        type: string
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.Auth'
        "403":
          description: :id is empty
    put:
      tags:
      - auth
      description: |-
        update the Auth
        <br>
      operationId: AuthController.Put
      parameters:
      - in: path
        name: id
        description: The id you want to update
        required: true
        type: string
      - in: body
        name: body
        description: body for Auth content
        required: true
        schema:
          $ref: '#/definitions/models.Auth'
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.Auth'
        "403":
          description: :id is not int
    delete:
      tags:
      - auth
      description: |-
        delete the Auth
        <br>
      operationId: AuthController.Delete
      parameters:
      - in: path
        name: id
        description: The id you want to delete
        required: true
        type: string
      responses:
        "200":
          description: '{string} delete success!'
        "403":
          description: id is empty
  /auth/login:
    post:
      tags:
      - auth
      description: |-
        user login
        <br>
      operationId: AuthController.Login
      parameters:
      - in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.Login'
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: missing or invalid fields
        "401":
          description: invalid email or password
        "500":
          description: internal error
  /auth/registration:
    post:
      tags:
      - auth
      description: |-
        user registration
        <br>
      operationId: AuthController.Registration
      parameters:
      - in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.Registration'
      responses:
        "201":
          description: ""
          schema:
            $ref: '#/definitions/utils.APIResponse'
        "400":
          description: missing or invalid fields
        "500":
          description: internal error
  /leverage/position/{id}:
    get:
      tags:
      - leverage
      description: |-
        查詢單個倉位的詳細資訊
        <br>
      operationId: LeverageController.GetPositionDetail
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: path
        name: id
        description: 倉位 ID
        required: true
        type: integer
        format: int64
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.LeveragePosition'
        "401":
          description: Unauthorized
        "404":
          description: Position not found
  /leverage/position/{id}/close:
    post:
      tags:
      - leverage
      description: |-
        平倉（關閉槓桿倉位）
        <br>
      operationId: LeverageController.ClosePosition
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: path
        name: id
        description: 倉位 ID
        required: true
        type: integer
        format: int64
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.LeveragePosition'
        "400":
          description: Bad request
        "401":
          description: Unauthorized
        "404":
          description: Position not found
  /leverage/position/open:
    post:
      tags:
      - leverage
      description: |-
        開設槓桿倉位（做多/做空）
        <br>
      operationId: LeverageController.OpenPosition
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: body
        name: body
        description: 開倉資訊
        required: true
        schema:
          $ref: '#/definitions/OpenPositionRequest'
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.LeveragePosition'
        "400":
          description: Bad request
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /leverage/positions/history:
    get:
      tags:
      - leverage
      description: |-
        查詢使用者的倉位歷史（包含已平倉）
        <br>
      operationId: LeverageController.GetPositionHistory
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: query
        name: symbol
        description: 交易對篩選
        type: string
      - in: query
        name: limit
        description: 每頁數量（預設20）
        type: integer
        format: int64
      - in: query
        name: offset
        description: 偏移量（預設0）
        type: integer
        format: int64
      responses:
        "200":
          description: ""
          schema:
            type: array
            items:
              $ref: '#/definitions/models.LeveragePosition'
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /leverage/positions/open:
    get:
      tags:
      - leverage
      description: |-
        查詢使用者的所有持倉
        <br>
      operationId: LeverageController.GetOpenPositions
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      responses:
        "200":
          description: ""
          schema:
            type: array
            items:
              $ref: '#/definitions/models.LeveragePosition'
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /market/klines:
    get:
      tags:
      - market
  /trading/order:
    post:
      tags:
      - trading
      description: |-
        執行市價單或限價單買入/賣出
        <br>
      operationId: TradingController.PlaceOrder
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: body
        name: body
        description: 訂單資訊
        required: true
        schema:
          $ref: '#/definitions/PlaceOrderRequest'
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.Order'
        "400":
          description: Bad request
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /trading/order/{id}/cancel:
    post:
      tags:
      - trading
      description: |-
        取消待處理的訂單（僅限價單可取消）
        <br>
      operationId: TradingController.CancelOrder
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: path
        name: id
        description: 訂單 ID
        required: true
        type: integer
        format: int64
      responses:
        "200":
          description: '{string} string "Order canceled successfully"'
        "400":
          description: Bad request
        "401":
          description: Unauthorized
        "404":
          description: Order not found
  /trading/orders:
    get:
      tags:
      - trading
      description: |-
        查詢使用者的訂單歷史
        <br>
      operationId: TradingController.GetOrders
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: query
        name: symbol
        description: 交易對篩選
        type: string
      - in: query
        name: limit
        description: 每頁數量（預設20）
        type: integer
        format: int64
      - in: query
        name: offset
        description: 偏移量（預設0）
        type: integer
        format: int64
      responses:
        "200":
          description: ""
          schema:
            type: array
            items:
              $ref: '#/definitions/models.Order'
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /trading/prices:
    get:
      tags:
      - trading
      description: |-
        取得所有支援交易對的當前價格
        <br>
      operationId: TradingController.GetPrices
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/map[string]float64'
  /trading/transactions:
    get:
      tags:
      - trading
      description: |-
        查詢使用者的交易記錄
        <br>
      operationId: TradingController.GetTransactions
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: query
        name: symbol
        description: 幣種篩選
        type: string
      - in: query
        name: limit
        description: 每頁數量（預設20）
        type: integer
        format: int64
      - in: query
        name: offset
        description: 偏移量（預設0）
        type: integer
        format: int64
      responses:
        "200":
          description: ""
          schema:
            type: array
            items:
              $ref: '#/definitions/models.Transaction'
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /trading/wallets:
    get:
      tags:
      - trading
      description: |-
        查詢使用者的所有錢包餘額
        <br>
      operationId: TradingController.GetWallets
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      responses:
        "200":
          description: ""
          schema:
            type: array
            items:
              $ref: '#/definitions/models.Wallet'
        "401":
          description: Unauthorized
        "500":
          description: Internal server error
  /user/:
    get:
      tags:
      - user
      description: |-
        get User
        <br>
      operationId: UserController.Get All
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: query
        name: query
        description: Filter. e.g. col1:v1,col2:v2 ...
        type: string
      - in: query
        name: fields
        description: Fields returned. e.g. col1,col2 ...
        type: string
      - in: query
        name: sortby
        description: Sorted-by fields. e.g. col1,col2 ...
        type: string
      - in: query
        name: order
        description: Order corresponding to each sortby field, if single value, apply
          to all sortby fields. e.g. desc,asc ...
        type: string
      - in: query
        name: limit
        description: Limit the size of result set. Must be an integer
        type: string
      - in: query
        name: offset
        description: Start position of result set. Must be an integer
        type: string
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.User'
        "401":
          description: Unauthorized
        "403":
          description: ""
    post:
      tags:
      - user
      description: |-
        create User
        <br>
      operationId: UserController.Post
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: body
        name: body
        description: body for User content
        required: true
        schema:
          $ref: '#/definitions/models.User'
      responses:
        "201":
          description: '{int} models.User'
        "401":
          description: Unauthorized
        "403":
          description: body is empty
  /user/{id}:
    get:
      tags:
      - user
      description: |-
        get User by id
        <br>
      operationId: UserController.Get One
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: path
        name: id
        description: The key for staticblock
        required: true
        type: string
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.User'
        "401":
          description: Unauthorized
        "403":
          description: :id is empty
    put:
      tags:
      - user
      description: |-
        update the User
        <br>
      operationId: UserController.Put
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: path
        name: id
        description: The id you want to update
        required: true
        type: string
      - in: body
        name: body
        description: body for User content
        required: true
        schema:
          $ref: '#/definitions/models.User'
      responses:
        "200":
          description: ""
          schema:
            $ref: '#/definitions/models.User'
        "401":
          description: Unauthorized
        "403":
          description: :id is not int
    delete:
      tags:
      - user
      description: |-
        delete the User
        <br>
      operationId: UserController.Delete
      parameters:
      - in: header
        name: Authorization
        description: Bearer {token}
        required: true
        type: string
      - in: path
        name: id
        description: The id you want to delete
        required: true
        type: string
      responses:
        "200":
          description: '{string} delete success!'
        "401":
          description: Unauthorized
        "403":
          description: id is empty
definitions:
  OpenPositionRequest:
    title: OpenPositionRequest
    type: object
  PlaceOrderRequest:
    title: PlaceOrderRequest
    type: object
  map[string]float64:
    title: map[string]float64
    type: object
  models.Auth:
    title: Auth
    type: object
    properties:
      createdAt:
        type: string
        format: datetime
      expiredAt:
        type: string
        format: datetime
      id:
        type: integer
        format: int64
      token:
        type: string
  models.LeveragePosition:
    title: LeveragePosition
    type: object
    properties:
      closedAt:
        type: string
        format: datetime
      createdAt:
        type: string
        format: datetime
      entryPrice:
        description: 開倉價格
        type: number
        format: double
      exitPrice:
        description: 平倉價格
        type: number
        format: double
      id:
        type: integer
        format: int64
      leverage:
        description: 槓桿倍數：1-10
        type: integer
        format: int64
      liquidationPrice:
        description: 爆倉價格
        type: number
        format: double
      margin:
        description: 保證金（USDT）
        type: number
        format: double
      quantity:
        description: 持倉數量
        type: number
        format: double
      realizedPnl:
        description: 已實現盈虧
        type: number
        format: double
      side:
        $ref: '#/definitions/models.PositionSide'
        description: LONG or SHORT
      status:
        $ref: '#/definitions/models.PositionStatus'
      symbol:
        description: 交易對：BTCUSDT, ETHUSDT, SOLUSDT
        type: string
      unrealizedPnl:
        description: 未實現盈虧
        type: number
        format: double
      updatedAt:
        type: string
        format: datetime
  models.Login:
    title: Login
    type: object
    properties:
      email:
        type: string
      password:
        type: string
  models.Order:
    title: Order
    type: object
    properties:
      createdAt:
        type: string
        format: datetime
      errorMsg:
        type: string
      id:
        type: integer
        format: int64
      limitPrice:
        description: 限價（僅限價單使用）
        type: number
        format: double
      price:
        description: 成交價格
        type: number
        format: double
      quantity:
        description: 交易數量
        type: number
        format: double
      side:
        $ref: '#/definitions/models.OrderSide'
        description: BUY or SELL
      status:
        $ref: '#/definitions/models.OrderStatus'
      symbol:
        description: 交易對：BTCUSDT, ETHUSDT, SOLUSDT
        type: string
      totalAmount:
        description: 總金額
        type: number
        format: double
      type:
        $ref: '#/definitions/models.OrderType'
        description: MARKET or LIMIT
      updatedAt:
        type: string
        format: datetime
  models.OrderSide:
    title: OrderSide
    type: string
    enum:
    - OrderSideBuy = "BUY"
    - OrderSideSell = "SELL"
    example: BUY
  models.OrderStatus:
    title: OrderStatus
    type: string
    enum:
    - OrderStatusPending = "PENDING"
    - OrderStatusCompleted = "COMPLETED"
    - OrderStatusFailed = "FAILED"
    - OrderStatusCanceled = "CANCELED"
    example: PENDING
  models.OrderType:
    title: OrderType
    type: string
    enum:
    - OrderTypeMarket = "MARKET"
    - OrderTypeLimit = "LIMIT"
    example: MARKET
  models.PositionSide:
    title: PositionSide
    type: string
    enum:
    - PositionSideLong = "LONG"
    - PositionSideShort = "SHORT"
    example: LONG
  models.PositionStatus:
    title: PositionStatus
    type: string
    enum:
    - PositionStatusOpen = "OPEN"
    - PositionStatusClosed = "CLOSED"
    - PositionStatusLiquidated = "LIQUIDATED"
    example: OPEN
  models.Registration:
    title: Registration
    type: object
    properties:
      email:
        type: string
      name:
        type: string
      password:
        type: string
  models.Transaction:
    title: Transaction
    type: object
    properties:
      amount:
        description: 金額（正數為增加，負數為減少）
        type: number
        format: double
      balanceAfter:
        description: 交易後餘額
        type: number
        format: double
      balanceBefore:
        description: 交易前餘額
        type: number
        format: double
      createdAt:
        type: string
        format: datetime
      description:
        type: string
      id:
        type: integer
        format: int64
      symbol:
        description: 幣種
        type: string
      type:
        $ref: '#/definitions/models.TransactionType'
  models.TransactionType:
    title: TransactionType
    type: string
    enum:
    - TransactionTypeBuy = "BUY"
    - TransactionTypeSell = "SELL"
    - TransactionTypeDeposit = "DEPOSIT"
    - TransactionTypeWithdraw = "WITHDRAW"
    - TransactionTypeMarginDeposit = "MARGIN_DEPOSIT"
    - TransactionTypeMarginWithdraw = "MARGIN_WITHDRAW"
    - TransactionTypeLiquidation = "LIQUIDATION"
    example: BUY
  models.User:
    title: User
    type: object
    properties:
      createdAt:
        type: string
        format: datetime
      email:
        type: string
      id:
        type: integer
        format: int64
      name:
        type: string
      password:
        type: string
  models.Wallet:
    title: Wallet
    type: object
    properties:
      balance:
        description: 餘額
        type: number
        format: double
      createdAt:
        type: string
        format: datetime
      id:
        type: integer
        format: int64
      locked:
        description: 鎖定金額（掛單中）
        type: number
        format: double
      symbol:
        description: 幣種：USDT, BTC, ETH, SOL
        type: string
      updatedAt:
        type: string
        format: datetime
  utils.APIResponse:
    title: APIResponse
    type: object
    properties:
      data:
        $ref: '#/definitions/utils.any'
      error:
        $ref: '#/definitions/utils.any'
      status:
        type: integer
        format: int64
      success:
        type: boolean
  utils.any:
    title: any
    type: object
